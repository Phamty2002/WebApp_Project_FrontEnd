{"ast":null,"code":"var _jsxFileName = \"/Users/typham/Documents/GitHub/WebApp_Project_FrontEnd/src/components/Login.js\";\nimport React, { useState } from 'react';\nimport '../styles/styles.css';\nfunction Modal({\n  message,\n  onClose\n}) {\n  console.log('Modal rendering with message:', message); // Log to see if this component renders\n  // Now, the modal visibility is controlled by inline style based on the `message`.\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal\",\n    style: {\n      display: message ? 'flex' : 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 8,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 9,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"close\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 9\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 9\n    }\n  }, message)));\n}\nfunction Login() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n  async function handleLogin(event) {\n    event.preventDefault();\n    console.log('Handle login called'); // Log to see if the function is called\n\n    try {\n      const response = await fetch('/api/login/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username,\n          password\n        })\n      });\n      if (response.ok) {\n        console.log('Login successful, setting message'); // Log on success\n        setMessage('Login successful! Redirecting...');\n        setTimeout(() => {\n          setMessage(''); // Clear message before redirect\n          window.location.href = '/home'; // Redirect to the home page after a delay\n        }, 3000); // Delay the redirect to allow the user to see the message\n      } else {\n        console.log('Login failed, setting error message'); // Log on failure\n        let errorMessage = 'Login Failed: username or password is not correct'; // Default error message\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n        } catch (e) {\n          console.error('Error parsing JSON:', e);\n        }\n        setError(errorMessage);\n        setMessage(errorMessage); // Set the error message\n      }\n    } catch (error) {\n      console.log('An error occurred, setting error message'); // Log on catch\n      setError('An error occurred');\n      setMessage('An error occurred: ' + error.message); // Set the network error message\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    message: message,\n    onClose: () => setMessage(''),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    className: \"login-form\",\n    onSubmit: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, \"Login\"), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 19\n    }\n  }, error), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    required: true,\n    value: username,\n    onChange: e => setUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    required: true,\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/forgot-password\",\n    className: \"forgot-password-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }, \"Forgot Password?\")), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, \"Sign In\"), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"signup-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, \"Don't have an account ? \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/sign-up\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 35\n    }\n  }, \"Sign-Up\"))));\n}\nexport default Login;","map":{"version":3,"names":["React","useState","Modal","message","onClose","console","log","createElement","className","style","display","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","Login","username","setUsername","password","setPassword","error","setError","setMessage","handleLogin","event","preventDefault","response","fetch","method","headers","body","JSON","stringify","ok","setTimeout","window","location","href","errorMessage","errorData","json","e","onSubmit","htmlFor","type","id","name","required","value","onChange","target"],"sources":["/Users/typham/Documents/GitHub/WebApp_Project_FrontEnd/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\nimport '../styles/styles.css';\n\nfunction Modal({ message, onClose }) {\n  console.log('Modal rendering with message:', message); // Log to see if this component renders\n  // Now, the modal visibility is controlled by inline style based on the `message`.\n  return (\n    <div className=\"modal\" style={{ display: message ? 'flex' : 'none' }}>\n      <div className=\"modal-content\">\n        <span className=\"close\" onClick={onClose}>&times;</span>\n        <p>{message}</p>\n      </div>\n    </div>\n  );\n}\n\nfunction Login() {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n\n  async function handleLogin(event) {\n    event.preventDefault();\n    console.log('Handle login called'); // Log to see if the function is called\n  \n    try {\n      const response = await fetch('/api/login/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ username, password }),\n      });\n  \n      if (response.ok) {\n        console.log('Login successful, setting message'); // Log on success\n        setMessage('Login successful! Redirecting...');\n        setTimeout(() => {\n          setMessage(''); // Clear message before redirect\n          window.location.href = '/home'; // Redirect to the home page after a delay\n        }, 3000); // Delay the redirect to allow the user to see the message\n      } else {\n        console.log('Login failed, setting error message'); // Log on failure\n        let errorMessage = 'Login Failed: username or password is not correct'; // Default error message\n        try {\n          const errorData = await response.json();\n          errorMessage = errorData.message || errorMessage;\n        } catch (e) {\n          console.error('Error parsing JSON:', e);\n        }\n        setError(errorMessage);\n        setMessage(errorMessage); // Set the error message\n      }\n    } catch (error) {\n      console.log('An error occurred, setting error message'); // Log on catch\n      setError('An error occurred');\n      setMessage('An error occurred: ' + error.message); // Set the network error message\n    }\n  }  \n\n  return (\n    <div className=\"login-container\">\n      <Modal message={message} onClose={() => setMessage('')} />\n      <form className=\"login-form\" onSubmit={handleLogin}>\n        <h2>Login</h2>\n        {error && <div className=\"error-message\">{error}</div>}\n        <div className=\"form-group\">\n          <label htmlFor=\"username\">Username</label>\n          <input\n            type=\"text\"\n            id=\"username\"\n            name=\"username\"\n            required\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label htmlFor=\"password\">Password</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            name=\"password\"\n            required\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <a href=\"/forgot-password\" className=\"forgot-password-link\">\n            Forgot Password?\n          </a>\n        </div>\n        <button type=\"submit\">Sign In</button>\n        <p className=\"signup-link\">\n          Don't have an account ? <a href=\"/sign-up\">Sign-Up</a>\n        </p>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}